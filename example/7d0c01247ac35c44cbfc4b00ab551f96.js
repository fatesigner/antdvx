var _typeof=require('@babel/runtime/helpers/typeof');require('core-js/modules/es.array.concat.js'),require('core-js/modules/es.array.slice.js'),require('core-js/modules/es.array.map.js'),require('core-js/modules/es.regexp.exec.js'),require('core-js/modules/es.string.replace.js'),require('core-js/modules/es.array.join.js'),ace.define('ace/ext/elastic_tabstops_lite',['require','exports','module','ace/editor','ace/config'],(function(e,t,s){'use strict';var i=function(e){this.$editor=e;var t=this,s=[],i=!1;this.onAfterExec=function(){i=!1,t.processRows(s),s=[]},this.onExec=function(){i=!0},this.onChange=function(e){i&&(-1==s.indexOf(e.start.row)&&s.push(e.start.row),e.end.row!=e.start.row&&s.push(e.end.row))}};(function(){this.processRows=function(e){this.$inChange=!0;for(var t=[],s=0,i=e.length;s<i;s++){var o=e[s];if(!(t.indexOf(o)>-1))for(var r=this.$findCellWidthsForBlock(o),n=this.$setBlockCellWidthsToMax(r.cellWidths),a=r.firstRow,h=0,l=n.length;h<l;h++){var c=n[h];t.push(a),this.$adjustRow(a,c),a++}}this.$inChange=!1},this.$findCellWidthsForBlock=function(e){var t,s=[],i=e;while(i>=0){if(t=this.$cellWidthsForRow(i),0==t.length)break;s.unshift(t),i--}var o=i+1;i=e;var r=this.$editor.session.getLength();while(i<r-1){if(i++,t=this.$cellWidthsForRow(i),0==t.length)break;s.push(t)}return{cellWidths:s,firstRow:o}},this.$cellWidthsForRow=function(e){for(var t=this.$selectionColumnsForRow(e),s=[-1].concat(this.$tabsForRow(e)),i=s.map((function(e){return 0})).slice(1),o=this.$editor.session.getLine(e),r=0,n=s.length-1;r<n;r++){var a=s[r]+1,h=s[r+1],l=this.$rightmostSelectionInCell(t,h),c=o.substring(a,h);i[r]=Math.max(c.replace(/\s+$/g,'').length,l-a)}return i},this.$selectionColumnsForRow=function(e){var t=[],s=this.$editor.getCursorPosition();return this.$editor.session.getSelection().isEmpty()&&e==s.row&&t.push(s.column),t},this.$setBlockCellWidthsToMax=function(e){for(var t,s,i,o=!0,r=this.$izip_longest(e),n=0,a=r.length;n<a;n++){var h=r[n];if(h.push){h.push(NaN);for(var l=0,c=h.length;l<c;l++){var u=h[l];if(o&&(t=l,i=0,o=!1),isNaN(u)){s=l;for(var f=t;f<s;f++)e[f][n]=i;o=!0}i=Math.max(i,u)}}else console.error(h)}return e},this.$rightmostSelectionInCell=function(e,t){var s=0;if(e.length){for(var i=[],o=0,r=e.length;o<r;o++)e[o]<=t?i.push(o):i.push(0);s=Math.max.apply(Math,i)}return s},this.$tabsForRow=function(e){var t,s=[],i=this.$editor.session.getLine(e),o=/\t/g;while(null!=(t=o.exec(i)))s.push(t.index);return s},this.$adjustRow=function(e,t){var s=this.$tabsForRow(e);if(0!=s.length)for(var i=0,o=-1,r=this.$izip(t,s),n=0,a=r.length;n<a;n++){var h=r[n][0],l=r[n][1];o+=1+h,l+=i;var c=o-l;if(0!=c){var u=this.$editor.session.getLine(e).substr(0,l),f=u.replace(/\s*$/g,''),p=u.length-f.length;c>0&&(this.$editor.session.getDocument().insertInLine({row:e,column:l+1},Array(c+1).join(' ')+'\t'),this.$editor.session.getDocument().removeInLine(e,l,l+1),i+=c),c<0&&p>=-c&&(this.$editor.session.getDocument().removeInLine(e,l+c,l),i+=c)}}},this.$izip_longest=function(e){if(!e[0])return[];for(var t=e[0].length,s=e.length,i=1;i<s;i++){var o=e[i].length;o>t&&(t=o)}for(var r=[],n=0;n<t;n++){var a=[];for(i=0;i<s;i++)''===e[i][n]?a.push(NaN):a.push(e[i][n]);r.push(a)}return r},this.$izip=function(e,t){for(var s=e.length>=t.length?t.length:e.length,i=[],o=0;o<s;o++){var r=[e[o],t[o]];i.push(r)}return i}}).call(i.prototype),t.ElasticTabstopsLite=i;var o=e('../editor').Editor;e('../config').defineOptions(o.prototype,'editor',{useElasticTabstops:{set:function(e){e?(this.elasticTabstops||(this.elasticTabstops=new i(this)),this.commands.on('afterExec',this.elasticTabstops.onAfterExec),this.commands.on('exec',this.elasticTabstops.onExec),this.on('change',this.elasticTabstops.onChange)):this.elasticTabstops&&(this.commands.removeListener('afterExec',this.elasticTabstops.onAfterExec),this.commands.removeListener('exec',this.elasticTabstops.onExec),this.removeListener('change',this.elasticTabstops.onChange))}}})})),function(){ace.require(['ace/ext/elastic_tabstops_lite'],(function(e){'object'==('undefined'===typeof module?'undefined':_typeof(module))&&'object'==('undefined'===typeof exports?'undefined':_typeof(exports))&&module&&(module.exports=e)}))}();