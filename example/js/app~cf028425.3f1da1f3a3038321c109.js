(self['webpackChunk']=self['webpackChunk']||[]).push([[1532],{96332:function(e,t,n){'use strict';n.d(t,{Q:function(){return i}});var r=n(69771),i=(0,r.nN)({antd:{action:{add:'',edit:'',delete:{oktext:'',cancelText:'',confirmText:'',title:'',success:''},save:'',refresh:'',upload:'',export:'',exporting:'',exportToPDF:'',exportToImage:'',exportToExcel:''},pagination:{of:'',items:''},slideCaptcha:{tip:'',handingTip:'',loading:'',slider:'',validText:'',result:{failed:'',successful:''}}}})},29342:function(e,t,n){'use strict';n.d(t,{W1:function(){return r.W},w1:function(){return i.w1},pz:function(){return i.pz},HA:function(){return i.HA},Oy:function(){return o.O},XButton:function(){return c.Rb},XButtonAdd:function(){return c.B0},XButtonDelete:function(){return c.m0},XButtonEdit:function(){return c.dJ},XButtonRefresh:function(){return c.Cv},createXDrawer:function(){return a.createXDrawer},IconIdBadge:function(){return s.nO},Iconfont:function(){return s.Kr},createXModal:function(){return f.X},ScrollView:function(){return l.p},SlideCaptcha:function(){return d.q},XTable:function(){return v.CX},createXTable:function(){return v.$j},VxeG:function(){return S.By},createVxeGrid:function(){return S.wb},AuthService:function(){return g.e8},HttpService:function(){return g.OE},SessionService:function(){return g.mj},StorageService:function(){return g.V1}});var r=n(61462),i=n(90984),o=n(89135),u=n(67729);n.o(u,'AuthService')&&n.d(t,{AuthService:function(){return u.AuthService}}),n.o(u,'HttpService')&&n.d(t,{HttpService:function(){return u.HttpService}}),n.o(u,'IconIdBadge')&&n.d(t,{IconIdBadge:function(){return u.IconIdBadge}}),n.o(u,'Iconfont')&&n.d(t,{Iconfont:function(){return u.Iconfont}}),n.o(u,'ScrollView')&&n.d(t,{ScrollView:function(){return u.ScrollView}}),n.o(u,'SessionService')&&n.d(t,{SessionService:function(){return u.SessionService}}),n.o(u,'SlideCaptcha')&&n.d(t,{SlideCaptcha:function(){return u.SlideCaptcha}}),n.o(u,'StorageService')&&n.d(t,{StorageService:function(){return u.StorageService}}),n.o(u,'VxeG')&&n.d(t,{VxeG:function(){return u.VxeG}}),n.o(u,'XButton')&&n.d(t,{XButton:function(){return u.XButton}}),n.o(u,'XButtonAdd')&&n.d(t,{XButtonAdd:function(){return u.XButtonAdd}}),n.o(u,'XButtonDelete')&&n.d(t,{XButtonDelete:function(){return u.XButtonDelete}}),n.o(u,'XButtonEdit')&&n.d(t,{XButtonEdit:function(){return u.XButtonEdit}}),n.o(u,'XButtonRefresh')&&n.d(t,{XButtonRefresh:function(){return u.XButtonRefresh}}),n.o(u,'XTable')&&n.d(t,{XTable:function(){return u.XTable}}),n.o(u,'createVxeGrid')&&n.d(t,{createVxeGrid:function(){return u.createVxeGrid}}),n.o(u,'createXDrawer')&&n.d(t,{createXDrawer:function(){return u.createXDrawer}}),n.o(u,'createXModal')&&n.d(t,{createXModal:function(){return u.createXModal}}),n.o(u,'createXTable')&&n.d(t,{createXTable:function(){return u.createXTable}});var c=n(4210),a=(n(51963),n(10883));n.o(a,'AuthService')&&n.d(t,{AuthService:function(){return a.AuthService}}),n.o(a,'HttpService')&&n.d(t,{HttpService:function(){return a.HttpService}}),n.o(a,'IconIdBadge')&&n.d(t,{IconIdBadge:function(){return a.IconIdBadge}}),n.o(a,'Iconfont')&&n.d(t,{Iconfont:function(){return a.Iconfont}}),n.o(a,'ScrollView')&&n.d(t,{ScrollView:function(){return a.ScrollView}}),n.o(a,'SessionService')&&n.d(t,{SessionService:function(){return a.SessionService}}),n.o(a,'SlideCaptcha')&&n.d(t,{SlideCaptcha:function(){return a.SlideCaptcha}}),n.o(a,'StorageService')&&n.d(t,{StorageService:function(){return a.StorageService}}),n.o(a,'VxeG')&&n.d(t,{VxeG:function(){return a.VxeG}}),n.o(a,'XTable')&&n.d(t,{XTable:function(){return a.XTable}}),n.o(a,'createVxeGrid')&&n.d(t,{createVxeGrid:function(){return a.createVxeGrid}}),n.o(a,'createXModal')&&n.d(t,{createXModal:function(){return a.createXModal}}),n.o(a,'createXTable')&&n.d(t,{createXTable:function(){return a.createXTable}});n(42455),n(90801);var s=n(36963),f=(n(44708),n(21769),n(78212)),l=n(13091),d=n(74597),v=n(16019),S=(n(99618),n(67566),n(5003)),h=n(91122);n.o(h,'AuthService')&&n.d(t,{AuthService:function(){return h.AuthService}}),n.o(h,'HttpService')&&n.d(t,{HttpService:function(){return h.HttpService}}),n.o(h,'SessionService')&&n.d(t,{SessionService:function(){return h.SessionService}}),n.o(h,'StorageService')&&n.d(t,{StorageService:function(){return h.StorageService}});var g=n(70146)},38601:function(){},91122:function(e,t,n){'use strict';var r=n(38601);n.o(r,'AuthService')&&n.d(t,{AuthService:function(){return r.AuthService}}),n.o(r,'HttpService')&&n.d(t,{HttpService:function(){return r.HttpService}}),n.o(r,'SessionService')&&n.d(t,{SessionService:function(){return r.SessionService}}),n.o(r,'StorageService')&&n.d(t,{StorageService:function(){return r.StorageService}});var i=n(71351);n.o(i,'AuthService')&&n.d(t,{AuthService:function(){return i.AuthService}}),n.o(i,'HttpService')&&n.d(t,{HttpService:function(){return i.HttpService}}),n.o(i,'SessionService')&&n.d(t,{SessionService:function(){return i.SessionService}}),n.o(i,'StorageService')&&n.d(t,{StorageService:function(){return i.StorageService}});var o=n(79038);n.o(o,'AuthService')&&n.d(t,{AuthService:function(){return o.AuthService}}),n.o(o,'HttpService')&&n.d(t,{HttpService:function(){return o.HttpService}}),n.o(o,'SessionService')&&n.d(t,{SessionService:function(){return o.SessionService}}),n.o(o,'StorageService')&&n.d(t,{StorageService:function(){return o.StorageService}})},71351:function(){},79038:function(){},70146:function(e,t,n){'use strict';n.d(t,{e8:function(){return C},OE:function(){return _},mj:function(){return K},V1:function(){return $}});n(63238),n(15610),n(17460),n(25901),n(92189),n(91047),n(5769),n(14078);var r,i,o,u,c,a,s=n(81581),f=n(91443),l=n(90304),d=(n(12697),n(83352),n(95623),n(61514),n(72410),n(98010),n(20885),n(77713)),v=n(67798),S=n(93268),h=n(38936),g=n(89135),p=n(71351);function y(e,t){var n='undefined'!==typeof Symbol&&e[Symbol.iterator]||e['@@iterator'];if(!n){if(Array.isArray(e)||(n=m(e))||t&&e&&'number'===typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError('Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.')}var o,u=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return u=e.done,e},e:function(e){c=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(c)throw o}}}}function m(e,t){if(e){if('string'===typeof e)return X(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return'Object'===n&&e.constructor&&(n=e.constructor.name),'Map'===n||'Set'===n?Array.from(e):'Arguments'===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?X(e,t):void 0}}function X(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var I,b,A,T,w,k,R,O={homePage:null,redirectEnable:!1,authPage:null,authMode:null,superRole:[]},C=(r=(0,v.b2)(),i=function(e,t){return(0,v.f3)(g.O.AUTH_SERVICE_CONFIG)(e,void 0,0)},o=function(e,t){return(0,v.f3)(g.O.SESSION_SERVICE)(e,void 0,1)},u=Reflect.metadata('design:type',Function),c=Reflect.metadata('design:paramtypes',['undefined'===typeof AuthServiceConfig?Object:AuthServiceConfig,'undefined'===typeof p.ISessionService?Object:p.ISessionService]),r(a=i(a=o(a=u(a=c(a=function(){function e(t,n){(0,s.Z)(this,e),this._sessionService=n,(0,l.Z)(this,'config',void 0),this.config=(0,d.Z)({},O,t)}return(0,f.Z)(e,[{key:'isAuthenticated',value:function(){var e,t;return!(null===(e=this._sessionService.user)||void 0===e||!e.username||null===(t=this._sessionService.user)||void 0===t||!t.accessToken)}},{key:'isAuthorized',value:function(e,t){var n,r,i,o=this;if(!e.name||e.name===this.config.authPage)return!0;if(this.config.superRole&&null!==(n=this._sessionService)&&void 0!==n&&null!==(r=n.user)&&void 0!==r&&null!==(i=r.roles)&&void 0!==i&&i.some((function(e){return o.config.superRole.includes(e)})))return!0;if('client'===this.config.authMode){var u,c,a;if(!t)t=null!==(u=null===(c=this._sessionService)||void 0===c||null===(a=c.user)||void 0===a?void 0:a.roles)&&void 0!==u?u:[];var s=[];return e.matched&&e.matched.length?s=e.matched.slice().reverse():s.push(e),s.every((function(e){var n=e.meta;if(n&&e.name){if(n.allowAnonymous)return!0;if(n.auth&&n.auth.length){var r=o.authRoles(t,n.auth);return r.permissible}return t.length}return!0}))}return this._sessionService.user.permissions.some((function(t){return t===e.name}))}},{key:'authRoles',value:function(e,t){for(var n,r=[],i=t&&t.length,o=!1,u=0;u<i;u++){n=t[u];var c,a=y(e);try{for(a.s();!(c=a.n()).done;){var s=c.value;if(n===s){o=!0;break}}}catch(e){a.e(e)}finally{a.f()}o||(r.push(n),o=!1)}return{permissible:!i||r.length<i,unauthorizedRoles:r}}},{key:'getAuthorizedRoutes',value:function(e,t){var n,r=this;t=null!==(n=t)&&void 0!==n?n:this._sessionService.user.roles;var i=new h.q({idKey:'path',labelKey:'path',childrenKey:'children'}),o=i.filter(e,(function(e){return r.isAuthorized(e,t)}));return o.filter((function(e){return e.children.length}))}},{key:'getAuthorizedMenus',value:function(e,t){return(0,S.le)(t)&&(t=this._sessionService.user.roles),'client'===this.config.authMode?[]:e}}]),e}())||a)||a)||a)||a)||a),E=(n(48410),n(55849),n(92571),n(61418),n(778)),B=n.n(E),V=n(88809),x=n.n(V);(function(e){e['FormUrlEncoded']='application/x-www-form-urlencoded;charset=UTF-8',e['FormData']='multipart/form-data',e['JSON']='application/json;charset=UTF-8',e['PDF']='application/pdf'})(R||(R={}));var H={baseURL:'',timeout:2e4,withCredentials:!1,responseType:'json'},_=(I=(0,v.b2)(),b=function(e,t){return(0,v.f3)(g.O.HTTP_SERVICE_CONFIG)(e,void 0,0)},A=function(e,t){return(0,v.jt)()(e,void 0,0)},T=Reflect.metadata('design:type',Function),w=Reflect.metadata('design:paramtypes',['undefined'===typeof HttpServiceConfig?Object:HttpServiceConfig]),I(k=b(k=A(k=T(k=w(k=function(){function e(t){var n=this;(0,s.Z)(this,e),(0,l.Z)(this,'instance',void 0),t=t?Object.assign({},H,t):H,this.instance=x().create(t),Object.keys(t).forEach((function(e){Object.prototype.hasOwnProperty.call(x().defaults,e)&&(n.instance.defaults[e]=t[e])})),t.addXMLHttpRequestHeader&&(this.instance.defaults.headers.common['X-Requested-With']='XMLHttpRequest'),this.instance.interceptors.request.use((function(e){return'get'!==e.method&&'GET'!==e.method&&e.headers['Content-Type']===R.FormUrlEncoded&&(e.data=B().stringify(e.data)),e}),(function(e){return Promise.reject(e)})),t.configure&&t.configure(this.instance.defaults,this.instance.interceptors)}return(0,f.Z)(e,[{key:'getUri',value:function(e){return this.instance.getUri(e)}},{key:'request',value:function(e){return this.instance.request(e)}},{key:'get',value:function(e,t){return this.instance.get(e,t)}},{key:'delete',value:function(e,t){return this.instance.delete(e,t)}},{key:'head',value:function(e,t){return this.instance.head(e,t)}},{key:'options',value:function(e,t){return this.instance.options(e,t)}},{key:'post',value:function(e,t,n){return this.instance.post(e,t,n)}},{key:'put',value:function(e,t,n){return this.instance.put(e,t,n)}},{key:'patch',value:function(e,t,n){return this.instance.patch(e,t,n)}}]),e}())||k)||k)||k)||k)||k);n(20266);var G,j,U,Z,D,F,M,N,L,q,P,z,J=n(79038),K=(G=(0,v.b2)(),j=function(e,t){return(0,v.f3)(g.O.SESSION_SERVICE_CONFIG)(e,void 0,0)},U=function(e,t){return(0,v.f3)(g.O.STORAGE_SERVICE)(e,void 0,1)},Z=Reflect.metadata('design:type',Function),D=Reflect.metadata('design:paramtypes',['undefined'===typeof SessionServiceConfig?Object:SessionServiceConfig,'undefined'===typeof J.IStorageService?Object:J.IStorageService]),G(F=j(F=U(F=Z(F=D(F=function(){function e(t,n){(0,s.Z)(this,e),this._localStorageService=n,(0,l.Z)(this,'config',void 0),(0,l.Z)(this,'user',void 0),this.config=(0,d.Z)({},t);var r,i,o=this._localStorageService.get('user');this.verify(o)?(this.updateUser(o),null===(r=this.config)||void 0===r||null===(i=r.onLogin)||void 0===i||i.call(r,o)):this.updateUser(this.getDefaultUser())}return(0,f.Z)(e,[{key:'getDefaultUser',value:function(e){var t,n;return(0,d.Z)(null===(t=this.config)||void 0===t||null===(n=t.getUserModel)||void 0===n?void 0:n.call(t),e)}},{key:'login',value:function(e){var t,n;this.updateUser(e),null===(t=this.config)||void 0===t||null===(n=t.onLogin)||void 0===n||n.call(t,e)}},{key:'logout',value:function(e){var t,n;this.updateUser(this.getDefaultUser({username:this.user.username})),null===(t=this.config)||void 0===t||null===(n=t.onLogout)||void 0===n||n.call(t,e)}},{key:'updateUser',value:function(e){e&&(this.user=(0,d.Z)({},this.user,e),this.saveToLocalStorage())}},{key:'updateRole',value:function(e){var t,n;(0,d.Z)(this.user,{currentRole:e}),null===(t=this.config)||void 0===t||null===(n=t.onRoleChanged)||void 0===n||n.call(t,e),this.saveToLocalStorage()}},{key:'verify',value:function(e){return(0,S.le)(e)&&(e=this.user),!!e&&(e.accessToken&&e.accessToken.trim()&&e.tokenExpirationTime>(new Date).getTime())}},{key:'saveToLocalStorage',value:function(){this._localStorageService.set('user',this.user)}}]),e}())||F)||F)||F)||F)||F),W=n(92805),$=(M=(0,v.b2)(),N=function(e,t){return(0,v.f3)(g.O.STORAGE_SERVICE_IDENTIFICATION)(e,void 0,0)},L=function(e,t){return(0,v.jt)()(e,void 0,0)},q=Reflect.metadata('design:type',Function),P=Reflect.metadata('design:paramtypes',[String]),M(z=N(z=L(z=q(z=P(z=function(){function e(t){(0,s.Z)(this,e),(0,l.Z)(this,'identification',void 0),this.identification=null!==t&&void 0!==t?t:(0,W.x)(7)}return(0,f.Z)(e,[{key:'set',value:function(e,t){return window.localStorage.setItem(this.identification+'_'+e,JSON.stringify(t))}},{key:'get',value:function(e){var t=window.localStorage.getItem(this.identification+'_'+e);if(t)try{return JSON.parse(window.localStorage.getItem(this.identification+'_'+e))}catch(e){return null}return null}},{key:'remove',value:function(e){window.localStorage.removeItem(this.identification+'_'+e)}}]),e}())||z)||z)||z)||z)||z)}}]);